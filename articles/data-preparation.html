<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="PopulationSynthesiser">
<title>Data Preparation • PopulationSynthesiser</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Preparation">
<meta property="og:description" content="PopulationSynthesiser">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PopulationSynthesiser</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data-preparation.html">Data Preparation</a>
    <a class="dropdown-item" href="../articles/get-started.html">Get Started</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AURIN-OFFICE/RCITI_PopulationSynthesiser/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Data Preparation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AURIN-OFFICE/RCITI_PopulationSynthesiser/blob/HEAD/vignettes/data-preparation.Rmd" class="external-link"><code>vignettes/data-preparation.Rmd</code></a></small>
      <div class="d-none name"><code>data-preparation.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AURIN-OFFICE/RCITI_PopulationSynthesiser" class="external-link">PopulationSynthesiser</a></span><span class="op">)</span></span></code></pre></div>
<p>This tutorial will teach you how to prepare ABS (Australian Bureau of
Statistics) data for creating a synthetic population. It covers the
steps to obtain a seed population from the ABS Microdata portal and
obtaining individual and household control tables from the ABS
TableBuilder portal. The tutorial is accompanied by screenshots to help
users navigate through the portals and complete the necessary steps to
obtain the required data.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="39%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>Dataset</th>
<th>Description</th>
<th>Source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Microdata: Census of Population and Housing</td>
<td>A 1% sample of the unit record file of the 2016 census survey</td>
<td><a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/Lookup/2037.0.30.001Main+Features12016" class="external-link uri">https://www.abs.gov.au/AUSSTATS/abs@.nsf/Lookup/2037.0.30.001Main+Features12016</a></td>
</tr>
<tr class="even">
<td>Person control 1: SEXP x MSTP</td>
<td>A person-level control table with gender (SEXP) and marital status
(MSTP)</td>
<td><a href="https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument" class="external-link uri">https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument</a></td>
</tr>
<tr class="odd">
<td>Person control 2: OCCP</td>
<td>A person-level control table with occupation (OCCP)</td>
<td><a href="https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument" class="external-link uri">https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument</a></td>
</tr>
<tr class="even">
<td>Household control 1: NPRD</td>
<td>A household-level control table with number of usual residents
(NPRD)</td>
<td><a href="https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument" class="external-link uri">https://www.abs.gov.au/ausstats/abs@.nsf/PrimaryMainFeatures/2073.0?OpenDocument</a></td>
</tr>
<tr class="odd">
<td>Statistical Area Level 2 (SA2) 2016 shapefile</td>
<td>Statistical Area Level 2 (SA2) ASGS Ed 2016 Digital Boundaries in
ESRI Shapefile Format</td>
<td><a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument" class="external-link uri">https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument</a></td>
</tr>
</tbody>
</table>
<p>There are two main types of inputs required to synthesise a
population: microdata and control total. Both of them can be downloaded
from <a href="https://www.abs.gov.au/" class="external-link uri">https://www.abs.gov.au/</a>. While they are not publicly
available, most Australian universities are subscribed to ABS data
services. Hence, it might be a good idea to check with your university
librarian before trying to apply for access by yourself.</p>
<p>In this example, we are going to synthesise the 2016 population of
the ‘Randwick - North’ region, New South Wales as defined by <a href="https://www.abs.gov.au/ausstats/abs@.nsf/Lookup/by%20Subject/1270.0.55.001~July%202016~Main%20Features~Statistical%20Area%20Level%202%20(SA2)~10014" class="external-link">Statistical
Areas Level 2 (SA2) 2016</a>.</p>
<pre><code><span><span class="co">#&gt; Reading layer `SA2_2016_AUST' from data source </span></span>
<span><span class="co">#&gt;   `/tmp/RtmprWgYog/file1e76b6a4e46/SA2_2016_AUST.shp' using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 2310 features and 12 fields (with 18 geometries empty)</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 96.81694 ymin: -43.74051 xmax: 167.998 ymax: -9.142176</span></span>
<span><span class="co">#&gt; Geodetic CRS:  GDA94</span></span></code></pre>
<p><img src="../reference/figures/map.png"></p>
<div class="section level2">
<h2 id="prepare-microdataseed-population">Prepare microdata/seed population<a class="anchor" aria-label="anchor" href="#prepare-microdataseed-population"></a>
</h2>
<blockquote>
<p><strong>Microdata</strong> is data in a unit record file that
provides detailed information about people, households, businesses or
other types of records - Source: 1406.0.55.003 - Responsible Use of ABS
Microdata, User Guide (<a href="https://www.abs.gov.au/ausstats/abs@.nsf/mf/1406.0.55.003" class="external-link uri">https://www.abs.gov.au/ausstats/abs@.nsf/mf/1406.0.55.003</a>)</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Go to <a href="https://www.abs.gov.au/websitedbs/D3310114.nsf/home/MicrodataDownload" class="external-link uri">https://www.abs.gov.au/websitedbs/D3310114.nsf/home/MicrodataDownload</a></p></li>
<li>
<p>Click on the ‘Log in’ button just to the right of the sidebar, as
shown in the screenshot below.</p>
<p><img src="../reference/figures/microdata-1.png"></p>
</li>
<li>
<p>Once you have successfully log in, find the entry with the title
‘Census of Population and Household, 2016’ and proceed to download the
CSV version of the microdata. In the picture below, it is the yellow
button of the first row.</p>
<p><img src="../reference/figures/microdata-2.png"></p>
</li>
<li>
<p>Save the file in a location you can easily find, or better yet,
in your Rproj folder, then extract the file. The folder should contain 3
files.</p>
<p><img src="../reference/figures/microdata-3.png"></p>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="prepare-control-tables">Prepare control tables<a class="anchor" aria-label="anchor" href="#prepare-control-tables"></a>
</h2>
<blockquote>
<p><strong>Control total</strong> is data in a tabulated format.</p>
</blockquote>
<p>ABS provides several datasets through their data portals, one of
which is the <a href="https://auth.censusdata.abs.gov.au/webapi/jsf/login.xhtml" class="external-link">ABS
Census TableBuilder</a>. TableBuilder is a web interface that allows
users to create cross-tabulations of census survey data in different
aggregations, across different geographical boundaries, and categories.
Check with your university librarian to see if your university is
subscribed to this service.</p>
<p>Here are the steps to create and download a control total table from
TableBuilder:</p>
<ol style="list-style-type: decimal">
<li>
<p>Go to <a href="https://auth.censusdata.abs.gov.au/webapi/jsf/login.xhtml" class="external-link uri">https://auth.censusdata.abs.gov.au/webapi/jsf/login.xhtml</a>
and log in with a valid credential.</p>
<p><img src="../reference/figures/tablebuilder-1.png"></p>
</li>
<li><p>Read the conditions of use and click ‘Accept conditions of use’
if you agree.</p></li>
<li>
<p>Navigate to ‘Catalogue’ -&gt; ‘2016 Census of Population and
Housing’ -&gt; ‘Census TableBuilder Pro’.</p>
<p><img src="../reference/figures/tablebuilder-2.png"></p>
</li>
<li><p>Create the person control totals using 2016 Census data.
Double-click ‘2016 Census - Counting Persons, Place of Usual Residence
(MB)’.</p></li>
<li>
<p>On the side bar menu we need to first select the geographical
area that we will create a population for. Open (do not click on the
tick mark of the entry) ‘Geographical Area (Usual Residence)’ -&gt;
‘Geographical Areas from Mesh Block (MBs)’ -&gt; ‘MB by Main Statistical
Area Structure (MAIN ASGS) (UR)’ -&gt; ‘New South Wales’ -&gt; ‘Sydney -
Eastern Suburbs’ -&gt; ‘Eastern Suburbs - South’ -&gt; ‘Randwick North’.
Tick the box of ‘Randwick North’ and add to the table as a ‘Wafer’.</p>
<p><img src="../reference/figures/tablebuilder-4.png"></p>
</li>
<li><p>Click on the ‘c’ button in grey color on the same line as ‘x SA2
(UR)’, once clicked it will turn blue and the area name will be replaced
with its area code. This is important for the population synthesiser to
sample records from microdata that matches the area code of the control
total we are about to create in this step.<br></p></li>
<li><p>Use the sidebar to select all entries under ‘SEXP sex’. Navigate
to ‘Selected Person Characteristic’ -&gt; ‘SEXP Sex’ -&gt; and tick both
‘Male’ and ‘Female’ entries. Then add to the table as rows by clicking
the ‘Row’ button.</p></li>
<li>
<p>Do the same for ‘MSTP marital status’. Make sure to tick on all
the categories and add as rows. If you have done everything correctly up
to this point your table should look like the one below.</p>
<p><img src="../reference/figures/tablebuilder-5.png"></p>
</li>
<li>
<p>Look on the top right of the screen and select ‘CSV String Value’
from the ‘Download Table’ drop down option, then click ‘Go’ to download
the table as a CSV file.</p>
<p><img src="../reference/figures/tablebuilder-6.png"></p>
</li>
<li>
<p>Remove both ‘SEXP’ and ‘MSTP’ from the table by dragging their
headers into the ‘Trash’ icon.</p>
<p><img src="../reference/figures/tablebuilder-7.png"></p>
</li>
<li>
<p>Create another table with only ‘Occp Occupation’ on it. Navigate
to ‘Employment, Income and Unpaid Work’ -&gt; ‘OCCP Occupation’ and
select all the 11 entries in the first level and add to the table as
rows and download it.</p>
<p><img src="../reference/figures/tablebuilder-8.png"></p>
</li>
<li>
<p>If you reach this point, you should now have two person control
tables. Let’s proceed to create and download another household control
table. Click on ‘Datasets’ to go back to the main menu to select a new
dataset. Select ‘Catalogue’-&gt; ‘2016 Census of Population and Housing’
-&gt; ‘Census TableBuilder Pro’ -&gt; ‘2016 Census - Counting Dwellings,
Place of Enumeration (MB)’.</p>
<p><img src="../reference/figures/tablebuilder-9.png"></p>
</li>
<li>
<p>Select the same geographical area. Open ‘Geographical Area
(Enumeration)’ -&gt; ‘Geographical Areas from Mesh Block (MBs)’ -&gt;
‘MB by Main Statistical Area Structure (MAIN ASGS) (UR)’ -&gt; ‘New
South Wales’ -&gt; ‘Sydney - Eastern Suburbs’ -&gt; ‘Eastern Suburbs -
South’ -&gt; ‘Randwick North’. Tick the box of ‘Randwick North’ and add
to the table as a ‘Wafer’. Also make sure that area name is switched to
area code by</p>
<p><img src="../reference/figures/tablebuilder-10.png"></p>
</li>
<li>
<p>‘Selected Dwelling and Household Characteristics’ -&gt; ‘NPRD
Number of Person Usually Resident in Dwelling’. Tick all entires except
‘Seven persons’ and ‘Eight or more persons’. The reason for this is the
microdata that we just downloaded doesn’t have households that are
larger than 6 usual residents to avoid those people from being
indentified from their data. There are ways to retify this but it is
beyond our goal for this example, which is to provide a simple
example.</p>
<p><img src="../reference/figures/tablebuilder-10.png"></p>
</li>
<li><p>Download the table as a ‘CSV String Value’ file.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="next-step">Next step<a class="anchor" aria-label="anchor" href="#next-step"></a>
</h2>
<p>Now that we have the microdata and control tables, we can proceed to
the next step, which is to create a synthetic population. Please proceed
to the <code><a href="../articles/get-started.html">vignette("get-started")</a></code> vignette.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Amarin Siripanich, Taha Rashidi, Australian Urban Research Infrastructure Network (AURIN).</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
